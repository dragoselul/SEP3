@page "/Marketplace"
@using Microsoft.AspNetCore.Components.Authorization
@using Domain.Models
@using HttpClients.ClientInterfaces
@inject NavigationManager navMgr
@inject IItemService itemService 

<CascadingAuthenticationState>
<AuthorizeView>
<Authorized>
    @if (items is null)
    {
        <div>Loading...</div>
    }
    else
    {
        <body>
        <!-- MAIN -->
            <!-- ------------------------------------------------- -->
            <div class="main">
        
                <!-- PLANTS -->
                <!-- ------------------------------------------------- -->
                <h2 class="main__title">Items (@items.Count())</h2>
           
                <!-- FILTERS -->
                <!-- ------------------------------------------------- -->
               <!--  <div class="filters">
                    <button class="filters__btn">
                        <span class="show">Show</span><span class="hide">Hide</span>&nbsp;Filters
                        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="black">
                            <path d="M3 8L21 8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M3 17H21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M17 5L17 11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M8 14L8 20" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <button class="filters__btn filters__btn--sort">
                        Sort By
                        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="black">
                            <path d="M6 9.5L12 15.5L18 9.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div> -->
                @if (items is null)
                {
                    <h5 style="color: white;">Loading...</h5>
                }
                else
                {
                    <!-- ITEMS -->
                    <!-- ------------------------------------------------- -->
                    <div class="items">
                        @foreach (var item  in items)
                        {
                            <div class="item card" @onclick="() =>ViewItem(item.Id)">
                                <div class="item__position">
                                    <img src="https://raw.githubusercontent.com/AbubakerSaeed/plants-shopping-uix/main/assets/1.png" alt="@item.Name" class="item__image item__image--hue">
                                </div>
                                <div class="item__detail">
                                    <p>@item.Name</p>
                                </div>
                                <div class="item__detail">
                                    <p>@item.Pricing</p>
                                </div>
                            </div>
                        }
                    </div>
                }
                <!-- PAGINATION -->
                <!-- ------------------------------------------------- -->
                <div>
                    <div class="pagination__page">Page 1 of 24</div>
                    <div class="pagination__links">
                        <a href="#" class="pagination__link">
                            <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: var(--s)" stroke="black">
                                <path d="M19 12.5H5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 19.5L5 12.5L12 5.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg> Previous Page
                        </a>
                        <a href="#" class="pagination__link">
                            Next Page
                            <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: var(--s)" stroke="black">
                                <path d="M5 12.5H19" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M12 5.5L19 12.5L12 19.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
            </body>
    }
</Authorized>
<NotAuthorized>
    <body>
  <!--  <div class="sidebar w3-sidebar">
        <h2 class="sidebar__title">Items (@items.Count())</h2>

        <div class="sidebar__category">
            <div class="sidebar__heading">
                Type
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up">
                    <polyline points="18 15 12 9 6 15"></polyline>
                </svg>
            </div>
            <div class="sidebar__options">
                <label class="check">
                    <input type="checkbox" class="check__input">
                    <span class="check__checkbox">
                        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 6.5L9 17.5L4 12.5" stroke="#fff" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                    <p class="check__text">Gift</p>
                </label>
                <label class="check">
                    <input type="checkbox" class="check__input">
                    <span class="check__checkbox">
                        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 6.5L9 17.5L4 12.5" stroke="#fff" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                    <p class="check__text">Indoor</p>
                </label>
                <label class="check">
                    <input type="checkbox" class="check__input">
                    <span class="check__checkbox">
                        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 6.5L9 17.5L4 12.5" stroke="#fff" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                    <p class="check__text">Outdoor</p>
                </label>
            </div>
        </div>

        <div class="sidebar__category">
            <div class="sidebar__heading">
                Size (3)
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up">
                    <polyline points="18 15 12 9 6 15"></polyline>
                </svg>
            </div>
            <div class="sidebar__options">
                <label class="check">
                    <input type="checkbox" class="check__input" checked>
                    <span class="check__checkbox">
                        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 6.5L9 17.5L4 12.5" stroke="#fff" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                    <p class="check__text">Small</p>
                </label>
                <label class="check">
                    <input type="checkbox" class="check__input" checked>
                    <span class="check__checkbox">
                        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 6.5L9 17.5L4 12.5" stroke="#fff" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                    <p class="check__text">Medium</p>
                </label>
                <label class="check">
                    <input type="checkbox" class="check__input" checked>
                    <span class="check__checkbox">
                        <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 6.5L9 17.5L4 12.5" stroke="#fff" stroke-width="2.6" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                    <p class="check__text">Large</p>
                </label>
            </div>
        </div>

        <div class="sidebar__category">
            <div class="sidebar__heading">
                Color
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-up">
                    <polyline points="18 15 12 9 6 15"></polyline>
                </svg>
            </div>
            <div class="sidebar__options">
                <div class="color" style="--hue: 0deg"></div>
                <div class="color" style="--hue: 30deg"></div>
                <div class="color" style="--hue: 60deg"></div>
                <div class="color" style="--hue: 90deg"></div>
                <div class="color" style="--hue: 120deg"></div>
                <div class="color" style="--hue: 150deg"></div>
                <div class="color" style="--hue: 180deg"></div>
                <div class="color" style="--hue: 210deg"></div>
                <div class="color" style="--hue: 240deg"></div>
                <div class="color" style="--hue: 270deg"></div>
                <div class="color" style="--hue: 300deg"></div>
                <div class="color" style="--hue: 330deg"></div>
            </div>
        </div>
    </div>
-->
    <!-- MAIN -->
    <!-- ------------------------------------------------- -->
    <div class="main">

        <!-- PLANTS -->
        <!-- ------------------------------------------------- -->
        <h2 class="main__title">Items (@items.Count())</h2>
   
        <!-- FILTERS -->
        <!-- ------------------------------------------------- -->
       <!--  <div class="filters">
            <button class="filters__btn">
                <span class="show">Show</span><span class="hide">Hide</span>&nbsp;Filters
                <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="black">
                    <path d="M3 8L21 8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M3 17H21" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M17 5L17 11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M8 14L8 20" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <button class="filters__btn filters__btn--sort">
                Sort By
                <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="black">
                    <path d="M6 9.5L12 15.5L18 9.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div> -->
        @if (items is null)
        {
            <h5 style="color: white;">Loading...</h5>
        }
        else
        {
            <!-- ITEMS -->
            <!-- ------------------------------------------------- -->
            <div class="items">
                @foreach (var item  in items)
                {
                    <div class="item card" @onclick="() =>ViewItem(item.Id)">
                        <div class="item__position">
                            <img src="https://raw.githubusercontent.com/AbubakerSaeed/plants-shopping-uix/main/assets/1.png" alt="@item.Name" class="item__image item__image--hue">
                        </div>
                        <div class="item__detail">
                            <p>@item.Name</p>
                        </div>
                        <div class="item__detail">
                            <p>@item.Pricing</p>
                        </div>
                    </div>
                }
            </div>
        }
        <!-- PAGINATION -->
        <!-- ------------------------------------------------- -->
        <div>
            <div class="pagination__page">Page 1 of 24</div>
            <div class="pagination__links">
                <a href="#" class="pagination__link">
                    <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: var(--s)" stroke="black">
                        <path d="M19 12.5H5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 19.5L5 12.5L12 5.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg> Previous Page
                </a>
                <a href="#" class="pagination__link">
                    Next Page
                    <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-left: var(--s)" stroke="black">
                        <path d="M5 12.5H19" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 5.5L19 12.5L12 19.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </a>
            </div>
        </div>
    </div>
    </body>
</NotAuthorized>
</AuthorizeView>
</CascadingAuthenticationState>


@code {
    private List<Item> items = new();

    protected override async Task OnInitializedAsync()
    {
        items = await itemService.GetItems();
    }

    private void ViewItem(int id)
    {
        navMgr.NavigateTo($"/ViewItem/{id}");
    }

}